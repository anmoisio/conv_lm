Experiment: theanolm-morph-42k/expt2-sampled
Job ID: 55718546
Task ID: 
Host: gpu27.int.triton.aalto.fi
Start date: Wed Sep 16 21:20:48 EEST 2020
Work directory: /scratch/work/moisioa3/conv_lm/experiments/theanolm-morph-42k/expt2-sampled
Temporary directory: /tmp/55718546

Currently Loaded Modules:
  1) speech-scripts/2016.05.24-b928230   6) binutils/2.25-GCCcore-5.4.0
  2) srilm/default                       7) GCC/5.4.0-2.25
  3) cuda/10.0.130                       8) libgpuarray/2017.03.29-45c731f
  4) cudnn/7.4.2-cuda                    9) anaconda3/latest
  5) GCCcore/5.4.0

 

steps/lmrescore_theanolm_nbest.sh --cmd srun --gres=gpu:1 --N 50 --lm-scale 10 /scratch/work/moisioa3/conv_lm/experiments/morph/srilm-5-gram/lang/train-nosp nnlm.h5 /scratch/work/moisioa3/conv_lm/experiments/morph/srilm-5-gram/models/tdnn/decode-devel decode_nbest
Rescores n-best lists using a TheanoLM model. Kaldi lattices contain "graph
scores" that consist of e.g. silence and pronunciation probabilities in addition
to language model probabilities, so this script first removes the original LM
scores from the graph scores to obtain the remainder of the probability mass.

Usage:
  steps/lmrescore_theanolm_nbest.sh [options] <lang-dir> <nnlm>                                     <input-decode-dir> <output-decode-dir>

Options:
  --N N
      Generate N hypotheses per utterance. (default: 10)

  --lm-scale WEIGHT
      Scale AM scores with the inverse of WEIGHT in N-best list generation.
      Equivalent to LM scaling. Note: The actual scoring can be done at
      different LM scales, but this should be as close to the optimal value as
      possible to obtain good n-best lists. (default: 12)

  --nnlm-weights WEIGHTS
      Interpolate NNLM scores with each of the weights in the whitespace-
      separated list WEIGHTS. (default: "0.5 1.0")

  --cmd COMMAND
      Submit parallel jobs to a cluster using COMMAND, typically run.pl or
      queue.pl. (default: run.pl)

  --use-phi (true|false)
      Should be set to true, if the source lattices were created by
      lmrescore.sh, and false if they came from decoding. Note: This is kind of
      an obscure option. If true, the script will remove the original LM scores
      using a phi (failure) matcher, which is appropriate if the old LM scores
      were added in this way. Otherwise normal composition is used. This won't
      actually make much difference (if any) to WER, it's more so we know we are
      doing the right thing. (default: false)

  --stage N
      Continue execution from stage N. (default: 0)
Failed on line: 25 at command: steps/lmrescore_theanolm_nbest.sh --cmd "${RUN_GPU}" --N $n --lm-scale $lm_scale /scratch/work/moisioa3/conv_lm/experiments/morph/srilm-5-gram/lang/train-nosp nnlm.h5 /scratch/work/moisioa3/conv_lm/experiments/morph/srilm-5-gram/models/tdnn/decode-devel decode_nbest
